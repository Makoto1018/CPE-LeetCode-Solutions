## Problem Title

- **Problem Number**:  570. Managers with at Least 5 Direct Reports
- **Difficulty**: Medium
- **Link**: [LeetCode 問題連結](https://leetcode.com/problems/managers-with-at-least-5-direct-reports/description/?envType=study-plan-v2&envId=top-sql-50)
- **是否有先參考別人的觀念**: 有看hint
---

### Problem Description

Write a solution to find managers with at least five direct reports.

Return the result table in any order.
---

### Approach

1. **思路概述**：先把超過五次的 id 抓出來，然後在join自己
2. **關鍵步驟**：
   - 用 `GROUP BY managerId` 搭配 `COUNT()` 統計每位 manager 的直屬員工數
   - 將這份統計結果與 Employee 自己做 join，找出 managerId 對應的名字
   - 用 `WHERE` 篩出至少有五位直屬員工的 manager
3. **時間複雜度分析**：$O(n)$

---

### Other Solution

> 其他的解法

---
### Summary

- **學到的新觀念**:
1. 如何對一張表進行 self-join（Employee 自己 join 自己）
2. 子查詢中可以計數後再與主表 join 使用
- **遇到的困難點與解法**:
要細心思考並想像 TABLE 經過操作之後的變化

---

### code
1. 自己寫的
```sql
-- Write your PostgreSQL query statement below
SELECT name
FROM (SELECT managerId, count(managerId) as cnt FROM Employee Group by managerId) as c
Join Employee as e
ON e.id = c.managerId
WHERE c.cnt>=5;
```
2. 別人的
```sql
SELECT employee.name
FROM Employee
WHERE id IN (
    SELECT managerId
    FROM Employee
    GROUP BY managerId
    HAVING COUNT(*) >= 5
)
```