## Problem Title

- **Problem Number**:  602. Friend Requests II: Who Has the Most Friends
- **Difficulty**: Medium
- **Link**: [LeetCode 問題連結](https://leetcode.com/problems/friend-requests-ii-who-has-the-most-friends/description/?envType=study-plan-v2&envId=top-sql-50)
- **是否有先參考別人的觀念**: 無
---

### Problem Description

You are the restaurant owner and you want to analyze a possible expansion (there will be at least one customer every day).

Compute the moving average of how much the customer paid in a seven days window (i.e., current day + 6 days before). average_amount should be rounded to two decimal places.

Return the result table ordered by visited_on in ascending order.

---

### Approach

1. **思路概述**：先把每個人各自有幾個朋友算出來，再找出最多的人就好。這題是 requester 跟 accepter 有出現的都算加一個朋友
2. **關鍵步驟**： union all 因為 union 會把完全一樣的資料壓成一筆
3. **時間複雜度分析**：$O(n)$

---

### Other Solution


---
### Summary

- **學到的新觀念**:
- **遇到的困難點與解法**:

---

### code
```sql
SELECT id, sum(c) as num
FROM
 (SELECT accepter_id as id, count(*) as c
 FROM RequestAccepted
 GROUP BY accepter_id
 UNION ALL
 SELECT requester_id as id, count(*) as c
 FROM RequestAccepted
 GROUP BY requester_id)
 GROUP BY id
order by num desc
limit 1;
```