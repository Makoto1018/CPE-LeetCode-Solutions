## Problem Title

- **Problem Number**:  185. Department Top Three Salaries
- **Difficulty**: Hard
- **Link**: [LeetCode 問題連結](https://leetcode.com/problems/department-top-three-salaries/description/?envType=study-plan-v2&envId=top-sql-50)
- **是否有先參考別人的觀念**: 有
1. dense_rank() `dense_rank() over(partition by ... order by ... asc/desc) as ...` 
---

### Problem Description

A company's executives are interested in seeing who earns the most money in each of the company's departments. A high earner in a department is an employee who has a salary in the top three unique salaries for that department.

Write a solution to find the employees who are high earners in each of the departments.

Return the result table in any order.
---

### Approach

1. **思路概述**：把排序弄好之後挑出個別部門的前三名就好
2. **關鍵步驟**： 
3. **時間複雜度分析**：$O(n)$

---

### Other Solution


---
### Summary

- **學到的新觀念**:
1. dense_rank() `dense_rank() over(partition by ... order by ... asc/desc)`，總之就是會多一個column。跟rank()不同，如果遇到兩個同名次的話不會跳過下一個名次。
2. 慢慢把條件拆解，分開來做
- **遇到的困難點與解法**:

---

### code
```sql
with ranked as (SELECT *, dense_rank() over(partition by departmentid order by salary desc) as rnk
FROM Employee)

SELECT d.name as Department, r.name as Employee, salary as Salary
FROM ranked as r
JOIN Department as d
on r.departmentId = d.id 
where rnk<=3
```